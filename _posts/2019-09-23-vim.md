---
title: "Vim编辑器"
subtitle: 'Vim编辑器'
author: "Kevin"
header-style: text
tags:
  - Vim
---

# 常用命令

`shift + i` 光标移动到行头部

`shift + a` 光标移动到行尾部

`dd` 剪切光标那一行

`行数n+dd` 剪切n行

`p` 粘贴

`yy` 复制光标那一行



# Vim

在windows系统中,  大家可以用 Sublime, PHPStorm, ATom, NodePad++ 等各种编辑器来编写代码. 

甚至windows自带的记事本也都可以写. 那么我们在黑乎乎的命令模式下, 如何编写代码呢???

这里主要给大家推荐 vim系统自带的编辑器

最早, 在Unix系统中, 使用Vi编辑器, 随着发展, 在Linux中, 升级强化之后, 变成Vim编辑器. 所以, vi 或 vim学会一个, 那么另一个就自然会用了.



# Vim模式

- 一般模式
- 编辑模式
- 命令行模式



## 一般模式

通过vim进去后第一个界面就是 **一般模式**, 此模式下, 通过方向键(上下左右)来移动光标, 也可以使用复制粘贴删除等操作, 但是**不能编辑内容**

```
格式:
	vim 文件名
	
文件若不存在, 则会自动创建一个 (进入后要保存才能创建, 否则只是临时的)
```



**案例**

1. 编辑 demo文件

   命令: `vim demo.txt`

   ![126](.\img\126.png)

   ![127](.\img\127.png)

   

2. 光标移动

   ```
   方式1:
            上 k
       左 h       右 l
            下 j
   
   方式2:
   	方向键
   ```



3. 翻页

   ```
   Ctrl + b 向下翻
   Ctrl + f 向上翻
   ```



4. 快速移动光标

   ```
   n + 空格     光标快速向后移动 n 位
   n + 回车     光标快速向下移动 n 行
   Home键	 	光标快速移动到 该行的最前面
   End键	 	光标快速移动到 该行的最后面
   w键	     	光标快速移动到 该词的最前面
   gg 	 	 	光标快速移动到 该文件的第一行
   G		 	光标快速移动到 该文件的最后一行 	(win快捷键: Shift + g)
   nG		 	光标快速移动到 该文件的第n行
   ```



5. 查询/替换

   ```
   查询:
       /搜索词 	从当前光标开始 向下查找
       ?搜索词 	从当前光标开始 向上查找
       n 		继续向下查找
       N 		继续向上查找
   
   替换:
       :N1,N2s/搜索词/替换词/g
       :N1,N2s/搜索词/替换词/gc
       
       以上代表从 N1行~N2行之间, 将搜索词 换做 替换词.
       其中: 
       	1) s/ 和 /g 是固定语法
       	2) c 代表提示用户是否替换
       	3) N1, N2 可以设为指定数字
       	4) N1, N2 可以设为1 和 $    	代表从1行 ~ 末尾      
   ```



6. 复制

   ```
   yy 	复制光标所在的那一行
   Nyy  复制光标所在行向下 N 行 ( 包含光标所在行 )
   
   yG 	复制光标所在行 到 最后一行
   yNG  复制光标所在行 到 第 N 行  
   
   y0 	复制当前光标 到 行首
   y$   复制当前光标 到 行尾
   ```



7. 粘贴

   ```
   p 	粘贴在 光标的下一行 (小写)
   P    粘贴在 光标的上一行 (大写)
   ```



8. 撤销	

   ```
   u 		 撤销 	(可连续撤销)
   Ctrl+r	  恢复       反撤销
   ```



9. 删除

   ```
   dd 	    删除当前光标所在行
   Ndd 	删除当前光标所在行向下 N 行
   dNG 	删除当前光标所在行到第 N 行
   dG	    删除当前光标所在行到最后一行
   ```

   删除和复制里面的 `G` 是大写, 不是小写

   

## 编辑模式

在一般模式下,  按下 `i`,`I`,`o`,`O`,`a`,`A`,`r`,`R`等其中任何一个字母就能进入**编辑模式**, 屏幕下方会有 `Insert`插入 或 `replace`替换提示, 此时, 可以随意编写代码了.

按 `Ese` 可退回到一般模式

![128](.\img\128.png)

![129](.\img\129.png)



**案例**

1. i 模式

   ```
   i 	从当前光标所在处 准备插入
   I    从当前光标所在行 最前面的可见字符处插入
   ```

2. a 模式

   ```
   a 	从当前光标所在下一个字符处 准备插入
   A 	从当前光标所在行末尾处 准备插入
   ```

3. o模式

   ```
   o(小写) 从当前光标所在的下一行 插入新行 	
   O(大写) 从当前光标所在的上一行 插入新行
   ```

4. r模式

   ```
   r 	可修改一次 当前光标所在的字符
   R    可修改多次 当前光标所在的字符及以后, 直到按Ese停止
   ```

5. 退出

   ```
   Esc  退出编辑模式, 回到一般模式
   ```





## 命令行模式

在一般模式下, 按下`:`, `/`, `?` 其中任意一个, 即可进入**命令行模式**, 在屏幕最下方可以看见光标.

该模式可以做 `查询`, `替换`,`保存`,`退出vim`,`显示行号`等一系列操作.



**案例**

1. 保存

   ```
   :w 	仅保存, 不退出
   ```

2. 退出

   ```
   :q 	仅退出, 不保存  (前提不能做过任何的修改, 哪怕修改后又恢复成原装也不行)
   ```

3. 保存并退出

   ```
   :wq	既保存又退出 	(就算没修改也可保存并退出, 且更新文件时间)
   :x   既保存又退出   (只有修改文件后, 才能保存退出, 也能更新文件时间)
   ```

4. 强制退出

   ```
   :q!  修改后, 因后悔而不想保存并退出
   ```

5. 另存为

   ```
   :w 新文件名 	 	整个另存入 新文件
   :N1,N2 w 新文件名 	 将N1~N2行另存入 新文件
   ```

6. 加载其他文件内容

   ```
   :r 新文件名 		将新文件中内容 加载到当前光标的后面 		
   ```

7. 行号

   ```
   :set nu 	显示行号
   :set nonu 	隐藏行号
   ```



   

# 文件缓存

1. 在使用 远程工具xshell 在vim编辑文档时, 容易手误按Ctrl + S, 出现假死状态

   ```
   解决方案:
   	Ctrl + q  或 Ctrl + z
   ```

   

2. 在vim编辑文档时, 出现突然断线等情况时, 导致文件未正常保存

   ```
   解决方案:
   	重新vim 该文件, 会有如下提示:
   	o 只读方式打开, 后期多人共同编辑一个文件时, 不是主操作人可选择此模式
   	e 直接编辑, 不恢复,采用原来的文件
   	r 恢复, 加载临时文件, 恢复当时未保存的代码, 使用好后, 建议删除交换文件
   	d 删除临时文件,  临时文件只要存在, 那么每次vim该文件, 都会出现此提示
   	q 退出
   
   1) 如果需要保留之前未保存的内容, 请选择 r 恢复, 再按 :wq! 强制保存退出
   2) 如果不需要保留之前未保存的内容, 请选择 d 
   3) 未打开文件之前, 可通过 rm -rf .xxxxx.swp 删除临时(交换)文件
   
   一旦删除了 swp临时文件, 就没有后悔的余地
   	
   ```

   

# vim自定义配置

刚刚vim可在 命令模式下通过 set nu 看到代码行号, 可关闭再重开后, 又没了,需要再次set nu. 

这里可以通过 自定义vim配置文件, 可永久设置.

在 自己的家目录中, 输入命令: `vim ~/.vimrc`

配置有如下选择:

```
set hlsearch 		"高亮度反白
set backspace=2 	"可随时用退格键删除
set autoindent 		"自动缩排
set ruler 			"可显示最后一行的状态
set showmode 		"左下角那一行的状态
set nu 				"可以在每一行的最前面显示行号
set bg=dark 		"显示不同的底色色调
syntax on 			"进行语法检验，颜色显示

					"这个文件的双引号表示的是注释
```

