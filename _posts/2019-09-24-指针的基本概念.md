---
title: "C语言指针基本概念"
subtitle: 'C语言指针基本概念'
author: "Kevin"
header-style: text
tags:
  - 指针

---

视频参考地址：https://www.bilibili.com/video/av384754?from=search&seid=4733679447093621532

文档下载地址：[https://lellansin.wordpress.com/2012/10/29/c%e8%af%ad%e8%a8%80%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b-%e7%ac%ac8%e8%ae%b2-%e6%8c%87%e9%92%88%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5/](https://lellansin.wordpress.com/2012/10/29/c语言入门教程-第8讲-指针的基本概念/)



#### “&” 与 “*”

取地址与指针运算符(取值运算)

`“&”` 对变量进行取地址运算:
&(变量名) => 获取变量的地址
如：

```c
int i;
printf("%d", &i);  // 打印出地址
```

如果一个函数没有声明类型，那默认类型就是`int`类型的，如果报错的话，那在函数体内要`return false` 或者开头的时候声明`void`（无返回值），如果用的是VC6.0的话，这种省略return的写法是允许的，但是其他编辑器可能会报错。

如:

```c
scanf("%d", &i);  // 传入一个地址
```

如果`scanf` 后面没有加`&`，那么会报错，因为可能会把变量当成地址去取。



而`*`作为指针运算符，当然我更乐意称它为取值运算：
*(变量名) => 将变量当做地址,到相应的地址取值

> 取值和取址互为逆运算

思考：

*(&(变量名)) 是什么？

> 答案：变量本身，因为互为逆运算，对冲了，答案就是6本身

```c
int i = 6;
printf( "%d", *(&i) );
```



#### 什么是指针变量？

指针变量就是用来存储地址的变量

任何变量都它存储的地址，这个地址是随机分配的。如：

```c
int i = 10;
```

i 这个变量的地址，是系统随机分配的。而我们对其进行 “&” 运算之后就可以得到它的地址，并且 `(&i)` 这个表达式就是一个指向i的指针。

这个指针所指向的地址中存储的值则是：
`*(&i)` ==> `i`



#### 声明与初始化

声明方式：

`指针类型 *指针变量名`;

例如：

```c
int *p1;
char *name;
```

初始化：

1)普通写法

```c
int x; 
int *p;
p = &x; //把x的地址赋给p，此时p是指针，存储的是x的地址，只有通过*p才能取到地址对应的值
/*
如果 x=3 ,那么 *p=3
*/
```

2)省略写法

```c
int x;
int *p = &x;
```

上述两种写法都声明了一个指针p,并且这个指针是指向变量 x 的
对于变量 x, (&x) 则是一个指向x的指针 （指针存放的就是地址, 而&运算得到的地址表达式也就是指向其本身的指针）
并且通过 *(指针) 取到这个地址中的值



#### 常见错误

请不要人为的指派地址：

> 指针变量不能直接赋值！

```c
// 错误1
int *p;
p = 10010; //指针直接赋值会导致非常大的安全问题，在内存当中，有一段是动态的，有一段是静态的，一个叫RAM，一个叫ROM，固态的内存中是放了关机之后也不会消失的数据，另外一边是放的动态的内存，里面放的数据在关机之后就会自动消失，找不到了，而指针可以通过地址直接访问到某个地方的值，如果直接给指针设置地址，直接访问内存某些区域的话，那么就是外挂了，如果可以做到这种程度，那已经是一个黑客高手了。但是正规来讲的话，这种是不科学的，不可以的。所以千万不要给指针直接赋予地址。因为系统中放了一些静态的重要数据，如果随意操作的话，系统会奔溃。
 
// 错误2
int x = 20;
printf("%d", &(*x) );//不可以拿某一个变量直接去取值。不过是编译还是运行都会报错。所以这种表达式是错误的。
 
// 正确形式：
int i, *p, *t;
p = &i;
t = p;
```

只能通过已有的变量传递



#### 经典的错误 – Scanf函数

```c
int score;
printf("请输入你的分数：n");
scanf("%d", score);


```

上述代码在编译时没有错，运行时会出现严重的错误

错误原因：
scanf() 函数后面的参数应该传入的是指针，而这里直接把 score 的值传了进去。

正确应该是：

```c
int score;
printf("请输入你的分数：n");
scanf("%d", &score);


```



#### Swap交换两个变量

与第五讲中不同的是,使用指针到某个地址中取访问它的值,就没有了作用域的限制

```c
#include<stdio.h>
 
void swap(int *x, int *y)
{
    int temp;
    temp = *x;
    *x = *y;
    *y = temp;
    printf("x=%d, y=%d n", *x, *y);
}
 
main()
{
    int i = 13, j = 45;
    swap(&i, &j);
    printf("i=%d, j=%dn", i, j);
}


```



#### 本讲小结

1) “&” 和 “*”

取地址与取值运算符 ==> 互为逆运算

2)指针变量是什么?

指针变量就是用来存储地址的变量
如,&i 就是一个指向变量i 的指针
通过*(指针)取值

3)声明

int *p1;
char *name;

4)初始化

普通写法

```c
int x; 
int *p;
p = &x;


```

省略写法

```c
int x;
int *p = &x;


```

5)指针的作用
引用类型，传递地址，减少内存消耗



#### 课后作业

现在有一个数组，存储的是一个同学的期中考试成绩。

```c
int score[8] = { 75, 86, 70, 88, 62, 87, 69, 77 };


```

那么现在我们要做的事情是：

1)求总分，求平均分

2)用指针遍历数组，求最大值和最小值

附加题：
用一个二维数组存储八门课的名称，例如：

```c
char course[8][256] = { "chinese", "English", ... }


```

再用二维数组，存储多个人的成绩，用指针遍历求出每门课的平均分